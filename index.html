<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Giga Earn</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- GigaPub Ad Script (Replace ID if needed) -->
    <script src="https://ad.gigapub.tech/script?id=4413"></script> 
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { background-color: #0f172a; color: white; font-family: 'Poppins', sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }
        .glass-panel { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 16px; }
        .page-section { display: none; padding-bottom: 100px; animation: fadeIn 0.3s; }
        .active-page { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 50; display: none; align-items: center; justify-content: center; }
        .modal-overlay.open { display: flex; }
        .nav-item.active { color: #3b82f6; transform: translateY(-5px); }
    </style>
</head>
<body>

    <!-- VPN ALERT MODAL -->
    <div id="vpn-screen" class="modal-overlay z-[100]">
        <div class="glass-panel p-6 mx-4 text-center max-w-xs w-full">
            <i class="fas fa-shield-halved text-5xl text-red-500 mb-4 animate-pulse"></i>
            <h1 class="text-xl font-bold text-red-400">VPN Required</h1>
            <p class="text-gray-400 mt-2 text-xs">Access denied! Please connect VPN to:</p>
            <div id="vpn-list" class="mt-3 bg-slate-800 p-2 rounded text-green-400 font-bold font-mono text-sm break-words">...</div>
            <button onclick="location.reload()" class="mt-6 bg-slate-600 w-full py-2 rounded-lg font-bold">Reload App</button>
        </div>
    </div>

    <!-- HEADER -->
    <div class="fixed top-0 w-full z-40 bg-[#0f172a]/95 border-b border-slate-800 px-4 py-3 flex justify-between items-center shadow-lg">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-slate-700 overflow-hidden"><img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" class="w-full"></div>
            <div>
                <h3 id="u-name" class="font-bold text-sm">Guest</h3>
                <span class="text-[10px] text-gray-400">ID: <span id="u-id">...</span></span>
            </div>
        </div>
        <div class="glass-panel px-4 py-1.5 text-right">
            <p class="text-[10px] text-gray-400">Balance</p>
            <p class="font-bold text-lg text-green-400">৳<span id="u-bal">0.00</span></p>
        </div>
    </div>
    <div class="h-20"></div>

    <!-- HOME PAGE -->
    <div id="home" class="page-section active-page px-4">
        <div class="bg-amber-500/10 border border-amber-500/20 rounded-lg p-2 mb-5 flex items-center gap-3">
            <i class="fas fa-bullhorn text-amber-500"></i>
            <marquee id="notice-text" class="text-xs text-amber-100">Loading...</marquee>
        </div>

        <div onclick="dailyCheckin()" class="glass-panel p-5 mb-5 flex justify-between items-center cursor-pointer active:scale-95 transition">
            <div>
                <h2 class="text-lg font-bold">Daily Check-in</h2>
                <p class="text-xs text-gray-400">Get <span class="text-yellow-400 font-bold">৳<span id="daily-amt">0</span></span> every 24h</p>
            </div>
            <i class="fas fa-gift text-3xl text-blue-500"></i>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div onclick="openSupport()" class="glass-panel p-4 text-center cursor-pointer"><i class="fab fa-telegram text-3xl text-sky-500"></i><p class="text-xs mt-2">Support</p></div>
            <div onclick="nav('task', this)" class="glass-panel p-4 text-center cursor-pointer"><i class="fas fa-tasks text-3xl text-green-500"></i><p class="text-xs mt-2">Start Task</p></div>
        </div>
    </div>

    <!-- TASK PAGE -->
    <div id="task" class="page-section px-4">
        <h2 class="text-lg font-bold mb-4 border-l-4 border-blue-500 pl-3">Earn Money</h2>
        <div id="task-list" class="space-y-3"></div>
    </div>

    <!-- REFERRAL PAGE -->
    <div id="referral" class="page-section px-4">
        <div class="glass-panel p-6 text-center">
            <h2 class="text-xl font-bold mb-2">Invite Friends</h2>
            <p class="text-xs text-gray-400 mb-4">Earn <span id="ref-bonus">0</span> per refer.</p>
            <div class="bg-slate-900 p-3 rounded mb-4 break-all text-xs text-blue-400 font-mono" id="ref-link">...</div>
            <button onclick="copyRef()" class="bg-blue-600 px-6 py-2 rounded-full text-sm font-bold">Copy Link</button>
        </div>
        <div class="mt-6">
            <h3 class="font-bold text-sm mb-2">My Referrals (<span id="ref-count">0</span>)</h3>
            <div id="ref-list" class="space-y-2 text-xs text-gray-400">Loading...</div>
        </div>
    </div>

    <!-- WALLET PAGE -->
    <div id="wallet" class="page-section px-4">
        <div class="glass-panel p-6 text-center mb-6">
            <p class="text-gray-400 text-xs">Available Balance</p>
            <h1 class="text-4xl font-bold mt-2 text-green-400">৳<span id="w-bal">0.00</span></h1>
        </div>
        
        <h3 class="text-xs text-gray-400 mb-2 uppercase">Select Method</h3>
        <div id="pay-methods" class="grid grid-cols-3 gap-3 mb-6"></div>

        <input type="number" id="w-amount" placeholder="Amount (৳)" class="w-full bg-slate-800 p-3 rounded mb-3 text-white outline-none border border-slate-600">
        <input type="number" id="w-number" placeholder="Account Number" class="w-full bg-slate-800 p-3 rounded mb-4 text-white outline-none border border-slate-600">
        
        <button onclick="requestWithdraw()" class="w-full bg-gradient-to-r from-blue-600 to-blue-500 py-3 rounded-lg font-bold shadow-lg">WITHDRAW</button>
        
        <p class="text-[10px] text-red-400 mt-2 text-center">*Minimum 2 Referrals Required to Withdraw.</p>

        <div class="mt-8">
            <h3 class="font-bold text-sm mb-3 border-b border-slate-700 pb-2">History</h3>
            <div id="w-history" class="space-y-2"></div>
        </div>
    </div>

    <!-- SPIN MODAL -->
    <div id="spin-modal" class="modal-overlay">
        <div class="glass-panel p-8 flex flex-col items-center">
            <h2 class="text-xl font-bold mb-4">Lucky Spin</h2>
            <div class="w-40 h-40 rounded-full border-4 border-dashed border-blue-500 flex items-center justify-center animate-spin-slow mb-6" id="spin-wheel">
                <i class="fas fa-star text-5xl text-yellow-400"></i>
            </div>
            <p id="spin-msg" class="text-sm text-gray-300 mb-4">Watch Ad to Claim Reward!</p>
            <button onclick="doSpin()" id="spin-btn" class="bg-green-500 px-8 py-2 rounded-full font-bold">SPIN NOW</button>
            <button onclick="closeSpin()" class="mt-4 text-xs text-gray-500">Close</button>
        </div>
    </div>

    <!-- NAV BAR -->
    <div class="fixed bottom-0 w-full bg-[#0f172a] border-t border-slate-800 flex justify-around pb-5 pt-3 z-40">
        <div onclick="nav('home', this)" class="nav-item active text-center w-1/4"><i class="fas fa-home text-xl"></i></div>
        <div onclick="nav('task', this)" class="nav-item text-center w-1/4"><i class="fas fa-layer-group text-xl"></i></div>
        <div onclick="nav('referral', this)" class="nav-item text-center w-1/4"><i class="fas fa-users text-xl"></i></div>
        <div onclick="nav('wallet', this)" class="nav-item text-center w-1/4"><i class="fas fa-wallet text-xl"></i></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
